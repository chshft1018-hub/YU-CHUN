<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>ä¸‰å¹´ç´šæ•¸å­¸å­¸ç¿’ç¶²ç«™</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    * { box-sizing: border-box; font-family: "Noto Sans TC", system-ui, -apple-system, BlinkMacSystemFont; }
    body {
      margin: 0;
      background: linear-gradient(160deg,#f5f7fa 0%,#c3cfe2 100%);
      display: flex;
      height: 100vh;
    }
    .sidebar {
      width: 250px;
      background: #1f2937;
      color: #fff;
      padding: 1rem;
      overflow-y: auto;
    }
    .sidebar h2 { margin-top: 0; font-size: 1.2rem; }
    .unit-btn {
      display: block;
      width: 100%;
      background: rgba(255,255,255,0.05);
      border: 1px solid transparent;
      color: #fff;
      text-align: left;
      padding: .6rem .8rem;
      margin-bottom: .5rem;
      border-radius: .5rem;
      cursor: pointer;
      transition: .15s;
      font-size: .95rem;
    }
    .unit-btn:hover, .unit-btn.active { background: rgba(255,255,255,0.15); border-color: rgba(255,255,255,0.25); }

    .main {
      flex: 1;
      padding: 1.3rem 1.4rem 1.4rem;
      overflow-y: auto;
    }
    #learning-panel, #question-panel {
      background: #fff;
      border-radius: 1rem;
      padding: 1.2rem 1.4rem;
      box-shadow: 0 10px 25px rgba(15,23,42,0.09);
      margin-bottom: 1rem;
      animation: fadein .3s ease;
    }
    @keyframes fadein {
      from { opacity: 0; transform: translateY(5px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .panel-title {
      font-size: 1.1rem;
      font-weight: 600;
      margin-bottom: .4rem;
      display: flex;
      align-items: center;
      gap: .3rem;
    }
    .panel-sub { color: #6b7280; font-size: .85rem; margin-bottom: .8rem; }
    ul { padding-left: 1.1rem; }
    .primary-btn {
      background: #0ea5e9;
      color: #fff;
      border: none;
      padding: .6rem 1.1rem;
      border-radius: .6rem;
      cursor: pointer;
      font-weight: 600;
      transition: .1s;
    }
    .primary-btn:hover { background: #0284c7; }

    .question-top {
      display: flex;
      gap: 1rem;
      align-items: flex-start;
    }
    .question-text { flex: 1; }
    .question-img {
      width: 180px;
      min-height: 110px;
      border-radius: .7rem;
      background: #e5e7eb;
      border: 1px dashed #94a3b8;
      overflow: hidden;
    }
    .question-img img {
      width: 100%;
      display: block;
    }

    .answer-area { margin-top: .9rem; display: flex; gap: .6rem; }
    .answer-area input {
      flex: 0 0 140px;
      padding: .5rem .6rem;
      border-radius: .5rem;
      border: 1px solid #d1d5db;
      font-size: 1rem;
    }
    .hint-box {
      display: none;
      margin-top: .8rem;
      background: #fef9c3;
      border: 1px solid #facc15;
      padding: .5rem .75rem;
      border-radius: .5rem;
      color: #92400e;
      font-size: .87rem;
      line-height: 1.35;
    }
    .question-card.shake { animation: shake .25s; }
    @keyframes shake {
      0% { transform: translateX(0); }
      25% { transform: translateX(-4px); }
      50% { transform: translateX(4px); }
      75% { transform: translateX(-4px); }
      100% { transform: translateX(0); }
    }
    .badge {
      background: #e0f2fe;
      color: #0369a1;
      padding: .1rem .4rem;
      border-radius: .4rem;
      font-size: .7rem;
    }
    .progress {
      width: 100%;
      background: #e5e7eb;
      border-radius: 999px;
      height: .6rem;
      margin-bottom: .8rem;
      overflow: hidden;
    }
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #38bdf8, #0f766e);
      width: 0%;
      transition: .2s;
    }
    .correct-banner {
      display: none;
      margin-top: .5rem;
      background: #dcfce7;
      border: 1px solid #22c55e;
      color: #166534;
      padding: .35rem .6rem;
      border-radius: .45rem;
      font-size: .8rem;
      width: fit-content;
    }
    .done-box {
      text-align: center;
      padding: 1.5rem 0 .5rem;
    }
    .done-box h3 { margin-bottom: .5rem; }
    .small-muted { font-size: .75rem; color: #94a3b8; margin-top: .4rem; }
  </style>
</head>
<body>
  <aside class="sidebar">
    <h2>æ•¸å­¸å­¸ç¿’ç¶²ç«™</h2>
    <button class="unit-btn active" data-unit="u1">å–®å…ƒ1 ç›´å¼ä¹˜æ³•</button>
    <button class="unit-btn" data-unit="u2">å–®å…ƒ2 é™¤æ³•åˆ†è£/å¹³åˆ†</button>
    <button class="unit-btn" data-unit="u3">å–®å…ƒ3 åˆ†æ•¸çš„èªè­˜</button>
    <button class="unit-btn" data-unit="u4">å–®å…ƒ4 å…ˆç®—å¾Œé™¤</button>
    <button class="unit-btn" data-unit="u5">å–®å…ƒ5 é€£ä¹˜å•é¡Œ</button>
    <button class="unit-btn" data-unit="u6">å–®å…ƒ6 åŠ æ¸›ä¼°ç®—</button>
    <button class="unit-btn" data-unit="u7">å–®å…ƒ7 é•·åº¦æ›ç®—</button>
  </aside>
  <main class="main">
    <section id="learning-panel"></section>
    <section id="question-panel" style="display:none;"></section>
  </main>

  <script>
    /* å…ˆåšä¸€å€‹å°å°çš„ SVG ç”¢ç”Ÿå™¨ï¼Œçµ¦ä¸åŒå–®å…ƒä¸åŒé¡è‰²ï¼‹æ¨™é¡Œ */
    function svgDataUri(label, desc, color) {
      const svg =
        `<svg xmlns='http://www.w3.org/2000/svg' width='300' height='180'>
          <rect width='300' height='180' rx='18' ry='18' fill='${color}'/>
          <text x='16' y='42' font-family='sans-serif' font-size='20' fill='#ffffff' font-weight='600'>${label}</text>
          <text x='16' y='90' font-family='sans-serif' font-size='14' fill='#ffffff'>${desc}</text>
          <circle cx='250' cy='140' r='20' fill='rgba(255,255,255,.25)'/>
        </svg>`;
      return "data:image/svg+xml;utf8," + encodeURIComponent(svg);
    }

    const IMG = {
      // å–®å…ƒ1
      u1q1: svgDataUri("å–®å…ƒ1 é¡Œ1","23å…ƒÃ—3æœ¬", "#38bdf8"),
      u1q2: svgDataUri("å–®å…ƒ1 é¡Œ2","14å…ƒÃ—6ç›’", "#38bdf8"),
      u1q3: svgDataUri("å–®å…ƒ1 é¡Œ3","92å…ƒÃ—4æœ¬", "#38bdf8"),
      u1q4: svgDataUri("å–®å…ƒ1 é¡Œ4","78å…ƒÃ—6ç›’", "#38bdf8"),
      u1q5: svgDataUri("å–®å…ƒ1 é¡Œ5","54Ã—8", "#38bdf8"),
      u1q6: svgDataUri("å–®å…ƒ1 é¡Œ6","35Ã—6", "#38bdf8"),
      u1q7: svgDataUri("å–®å…ƒ1 é¡Œ7","245Ã—3", "#38bdf8"),
      u1q8: svgDataUri("å–®å…ƒ1 é¡Œ8","398Ã—7", "#38bdf8"),
      // å–®å…ƒ2
      u2q1: svgDataUri("å–®å…ƒ2 é¡Œ1","18 é¡†Ã·3 é¡†", "#f97316"),
      u2q2: svgDataUri("å–®å…ƒ2 é¡Œ2","20 æ”¯Ã·4 äºº", "#f97316"),
      u2q3: svgDataUri("å–®å…ƒ2 é¡Œ3","25 é¡†Ã·4 é¡†", "#f97316"),
      u2q4: svgDataUri("å–®å…ƒ2 é¡Œ4","27 æ”¯Ã·5 äºº", "#f97316"),
      u2q5: svgDataUri("å–®å…ƒ2 é¡Œ5","30 é¡†Ã·6 é¡†", "#f97316"),
      u2q6: svgDataUri("å–®å…ƒ2 é¡Œ6","34 å¼µÃ·4 äºº", "#f97316"),
      u2q7: svgDataUri("å–®å…ƒ2 é¡Œ7","19 é¡†Ã·3 é¡†", "#f97316"),
      u2q8: svgDataUri("å–®å…ƒ2 é¡Œ8","42 é¡†Ã·5 äºº", "#f97316"),
      // å–®å…ƒ3
      u3q1: svgDataUri("å–®å…ƒ3 é¡Œ1","åœ“åˆ†4 å–1", "#10b981"),
      u3q2: svgDataUri("å–®å…ƒ3 é¡Œ2","8 å–3", "#10b981"),
      u3q3: svgDataUri("å–®å…ƒ3 é¡Œ3","6 å–2", "#10b981"),
      u3q4: svgDataUri("å–®å…ƒ3 é¡Œ4","3 å–2", "#10b981"),
      u3q5: svgDataUri("å–®å…ƒ3 é¡Œ5","5 å–1", "#10b981"),
      u3q6: svgDataUri("å–®å…ƒ3 é¡Œ6","8 å–5", "#10b981"),
      u3q7: svgDataUri("å–®å…ƒ3 é¡Œ7","10 å–4", "#10b981"),
      u3q8: svgDataUri("å–®å…ƒ3 é¡Œ8","2 å–1", "#10b981"),
      // å–®å…ƒ4
      u4q1: svgDataUri("å–®å…ƒ4 é¡Œ1","(12+9)Ã·7", "#6366f1"),
      u4q2: svgDataUri("å–®å…ƒ4 é¡Œ2","(18+4)Ã·5", "#6366f1"),
      u4q3: svgDataUri("å–®å…ƒ4 é¡Œ3","(35+7)Ã·7", "#6366f1"),
      u4q4: svgDataUri("å–®å…ƒ4 é¡Œ4","(28+8)Ã·6", "#6366f1"),
      u4q5: svgDataUri("å–®å…ƒ4 é¡Œ5","(40-4)Ã·6", "#6366f1"),
      u4q6: svgDataUri("å–®å…ƒ4 é¡Œ6","(25+5)Ã·5", "#6366f1"),
      u4q7: svgDataUri("å–®å…ƒ4 é¡Œ7","(50-8)Ã·7", "#6366f1"),
      u4q8: svgDataUri("å–®å…ƒ4 é¡Œ8","(32+4)Ã·6", "#6366f1"),
      // å–®å…ƒ5
      u5q1: svgDataUri("å–®å…ƒ5 é¡Œ1","6 æ”¯Ã—4 ç›’", "#ec4899"),
      u5q2: svgDataUri("å–®å…ƒ5 é¡Œ2","12 é¡†Ã—3æ‰“", "#ec4899"),
      u5q3: svgDataUri("å–®å…ƒ5 é¡Œ3","(5Ã—3)Ã—2", "#ec4899"),
      u5q4: svgDataUri("å–®å…ƒ5 é¡Œ4","8 æ”¯Ã—5 ç›’", "#ec4899"),
      u5q5: svgDataUri("å–®å…ƒ5 é¡Œ5","(24Ã—3)Ã—2", "#ec4899"),
      u5q6: svgDataUri("å–®å…ƒ5 é¡Œ6","(28Ã—4)Ã—3", "#ec4899"),
      u5q7: svgDataUri("å–®å…ƒ5 é¡Œ7","(25Ã—4)Ã—3", "#ec4899"),
      u5q8: svgDataUri("å–®å…ƒ5 é¡Œ8","(3Ã—5)Ã—2", "#ec4899"),
      // å–®å…ƒ6
      u6q1: svgDataUri("å–®å…ƒ6 é¡Œ1","1,984 â‰ˆ ?", "#0f766e"),
      u6q2: svgDataUri("å–®å…ƒ6 é¡Œ2","3,210 â‰ˆ ?", "#0f766e"),
      u6q3: svgDataUri("å–®å…ƒ6 é¡Œ3","2,450 â‰ˆ ?", "#0f766e"),
      u6q4: svgDataUri("å–®å…ƒ6 é¡Œ4","1,980+2,050", "#0f766e"),
      u6q5: svgDataUri("å–®å…ƒ6 é¡Œ5","3,180-1,090", "#0f766e"),
      u6q6: svgDataUri("å–®å…ƒ6 é¡Œ6","4,890+1,120", "#0f766e"),
      u6q7: svgDataUri("å–®å…ƒ6 é¡Œ7","5,430 â‰ˆ ?", "#0f766e"),
      u6q8: svgDataUri("å–®å…ƒ6 é¡Œ8","2,950+3,020", "#0f766e"),
      // å–®å…ƒ7
      u7q1: svgDataUri("å–®å…ƒ7 é¡Œ1","1m = ?cm", "#854d0e"),
      u7q2: svgDataUri("å–®å…ƒ7 é¡Œ2","1cm = ?mm", "#854d0e"),
      u7q3: svgDataUri("å–®å…ƒ7 é¡Œ3","5cm = ?mm", "#854d0e"),
      u7q4: svgDataUri("å–®å…ƒ7 é¡Œ4","120cm = ?m", "#854d0e"),
      u7q5: svgDataUri("å–®å…ƒ7 é¡Œ5","3m = ?cm", "#854d0e"),
      u7q6: svgDataUri("å–®å…ƒ7 é¡Œ6","14cm = ?mm", "#854d0e"),
      u7q7: svgDataUri("å–®å…ƒ7 é¡Œ7","250cm = ?m", "#854d0e"),
      u7q8: svgDataUri("å–®å…ƒ7 é¡Œ8","8mm = ?cm", "#854d0e")
    };

    const UNITS = {
      /* å–®å…ƒ1 */
      u1: {
        name: "å–®å…ƒ1 ç›´å¼ä¹˜æ³•",
        focus: `
          <div class="panel-title">å–®å…ƒ1 ç›´å¼ä¹˜æ³• <span class="badge">NC-3-3-1,2</span></div>
          <div class="panel-sub">æœƒæŠŠäºŒä½æ•¸ã€ä¸‰ä½æ•¸æ‹†æˆã€Œç™¾ã€åã€å€‹ã€å»ä¹˜ä¸€ä½æ•¸ï¼Œä¸¦èƒ½è§£ç”Ÿæ´»æƒ…å¢ƒé¡Œã€‚</div>
          <ul>
            <li>å…ˆç®—å€‹ä½ï¼Œå†ç®—åä½ï¼Œæœ‰é€²ä½è¦åŠ ä¸Šå»ã€‚</li>
            <li>èƒ½ç”¨ç›´å¼è¨˜éŒ„ä¹˜æ³•çš„éç¨‹ã€‚</li>
            <li>èƒ½çœ‹ã€Œä¸€æœ¬å¹¾å…ƒã€è²·å¹¾æœ¬ã€ç®—å‡ºæ‡‰ä»˜é‡‘é¡ã€‚</li>
          </ul>
          <button class="primary-btn" onclick="startUnit('u1')">é–‹å§‹ç·´ç¿’ (8é¡Œ)</button>
        `,
        questions: [
          { text: "1. ä¸€æœ¬ç­†è¨˜æœ¬ 23 å…ƒï¼Œå§å§è²·äº† 3 æœ¬ï¼ŒèŠ±äº†å¤šå°‘å…ƒï¼Ÿ", img: IMG.u1q1, answer: "69", hint: "å…ˆç®—å€‹ä½ï¼š3Ã—3=9ï¼Œå†ç®—åä½ï¼š2Ã—3=6ï¼Œåˆèµ·ä¾†æ˜¯ 69ã€‚" },
          { text: "2. ä¸€ç›’æ£’æ£’ç³– 14 å…ƒï¼Œè²· 6 ç›’å…±è¦å¤šå°‘å…ƒï¼Ÿ", img: IMG.u1q2, answer: "84", hint: "å€‹ä½ï¼š4Ã—6=24 â†’ å€‹ä½4ã€é€²2ï¼›åä½ï¼š1Ã—6=6ï¼ŒåŠ é€²ä½2=8 â†’ 84ã€‚" },
          { text: "3. ä¸€æœ¬æ¼«ç•« 92 å…ƒï¼Œå§å§è²·äº† 4 æœ¬ï¼ŒèŠ±äº†å¤šå°‘å…ƒï¼Ÿ", img: IMG.u1q3, answer: "368", hint: "å€‹ä½ï¼š2Ã—4=8ï¼›åä½ï¼š9Ã—4=36 â†’ å¯«æˆ 3ç™¾6å8ã€‚" },
          { text: "4. ä¸€ç›’æ°´å½© 78 å…ƒï¼Œè€å¸«è²·äº† 6 ç›’ï¼ŒèŠ±äº†å¤šå°‘å…ƒï¼Ÿ", img: IMG.u1q4, answer: "468", hint: "å€‹ä½ï¼š8Ã—6=48 â†’ å€‹ä½8ã€é€²4ï¼›åä½ï¼š7Ã—6=42ï¼ŒåŠ é€²ä½4=46 â†’ 4ç™¾6å8ã€‚" },
          { text: "5. 54Ã—8ï¼ï¼Ÿ", img: IMG.u1q5, answer: "432", hint: "å€‹ä½ï¼š4Ã—8=32 â†’ å€‹ä½2ã€é€²3ï¼›åä½ï¼š5Ã—8=40ï¼ŒåŠ é€²ä½3=43 â†’ 432ã€‚" },
          { text: "6. 35Ã—6ï¼ï¼Ÿ", img: IMG.u1q6, answer: "210", hint: "å€‹ä½ï¼š5Ã—6=30 â†’ å€‹ä½0ã€é€²3ï¼›åä½ï¼š3Ã—6=18ï¼ŒåŠ 3=21 â†’ 210ã€‚" },
          { text: "7. 245 å…ƒçš„æ›¸ï¼Œå§å§è²·äº† 3 æœ¬ï¼ŒèŠ±äº†å¤šå°‘å…ƒï¼Ÿ", img: IMG.u1q7, answer: "735", hint: "å€‹ä½ï¼š5Ã—3=15 â†’ å€‹ä½5ã€é€²1ï¼›åä½ï¼š4Ã—3=12ï¼ŒåŠ 1=13 â†’ é€²1ï¼›ç™¾ä½ï¼š2Ã—3=6ï¼ŒåŠ 1=7 â†’ 735ã€‚" },
          { text: "8. ä¸€ç›’æ°´æœç¦®ç›’ 398 å…ƒï¼Œåª½åª½è²·äº† 7 ç›’ï¼ŒèŠ±äº†å¤šå°‘å…ƒï¼Ÿ", img: IMG.u1q8, answer: "2786", hint: "å€‹ä½ï¼š8Ã—7=56 â†’ å€‹ä½6ã€é€²5ï¼›åä½ï¼š9Ã—7=63ï¼ŒåŠ 5=68 â†’ å€‹ä½8ã€é€²6ï¼›ç™¾ä½ï¼š3Ã—7=21ï¼ŒåŠ 6=27 â†’ 2786ã€‚" }
        ]
      },

      /* å–®å…ƒ2 */
      u2: {
        name: "å–®å…ƒ2 é™¤æ³•åˆ†è£/å¹³åˆ†",
        focus: `
          <div class="panel-title">å–®å…ƒ2 é™¤æ³•åˆ†è£/å¹³åˆ† <span class="badge">NC-3-4-1,2</span></div>
          <div class="panel-sub">å¾ã€Œæ¯å¹¾å€‹è£ä¸€åŒ…ã€æˆ–ã€Œåˆ†çµ¦å¹¾å€‹äººã€å»æƒ³é™¤æ³•ï¼Œæœƒç”¨ä¹˜æ³•+æ¸›æ³•è¨˜éŒ„ï¼Œæœ€å¾Œå¯«æˆé™¤æ³•ç®—å¼ã€‚</div>
          <ul>
            <li>å…ˆçœ‹ç¸½å…±æœ‰å¹¾å€‹ã€‚</li>
            <li>å†çœ‹ä¸€åŒ…å¹¾å€‹(æˆ–å¹¾å€‹äººè¦åˆ†)ã€‚</li>
            <li>èƒ½å¯«æˆã€Œè¢«é™¤æ•¸Ã·é™¤æ•¸ï¼å•†â€¦é¤˜æ•¸ã€ã€‚</li>
          </ul>
          <button class="primary-btn" onclick="startUnit('u2')">é–‹å§‹ç·´ç¿’ (8é¡Œ)</button>
        `,
        questions: [
          { text: "1. æœ‰ 18 é¡†ç³–æœï¼Œæ¯ 3 é¡†è£ä¸€åŒ…ï¼Œå¯ä»¥è£å¹¾åŒ…ï¼Ÿ", img: IMG.u2q1, answer: "6", hint: "é€™æ˜¯åˆ†è£ï¼š18Ã·3ï¼ï¼Ÿæƒ³3Ã—å¹¾ï¼18 â†’ 3Ã—6ï¼18ï¼Œæ‰€ä»¥æ˜¯ 6 åŒ…ã€‚" },
          { text: "2. æœ‰ 20 æ”¯é‰›ç­†ï¼Œåˆ†çµ¦ 4 ä½åŒå­¸ï¼Œæ¯äººåˆ†åˆ°å¹¾æ”¯ï¼Ÿ", img: IMG.u2q2, answer: "5", hint: "é€™æ˜¯å¹³åˆ†ï¼š20Ã·4ï¼ï¼Ÿå…ˆæƒ³4Ã—5ï¼20ï¼Œæ‰€ä»¥æ¯äºº5æ”¯ã€‚" },
          { text: "3. 25 é¡†è‰è“ï¼Œæ¯ 4 é¡†è£ä¸€ç›’ï¼Œå¯ä»¥è£å¹¾ç›’ï¼Ÿé‚„å‰©å¹¾é¡†ï¼Ÿè«‹å¯«å‡ºè£äº†å¹¾ç›’ã€‚", img: IMG.u2q3, answer: "6", hint: "25Ã·4ï¼Œ4Ã—6ï¼24 å‰›å¥½ä¸è¶…éï¼Œæœƒè£6ç›’ï¼Œé‚„æœƒå‰©1é¡†ã€‚" },
          { text: "4. 27 æ”¯å½©è‰²ç­†ï¼Œè¦åˆ†çµ¦ 5 å€‹äººï¼Œå¹³å‡æ¯äººåˆ†åˆ°å¹¾æ”¯ï¼Ÿ(å¯«æ•´æ•¸éƒ¨åˆ†)", img: IMG.u2q4, answer: "5", hint: "27Ã·5ï¼Œ5Ã—5=25 ä¸è¶…éï¼Œé‚„å‰©2æ”¯ â†’ æ¯äºº5æ”¯ï¼Œé¤˜2ã€‚" },
          { text: "5. 30 é¡†å½ˆç ï¼Œæ¯ 6 é¡†è£ä¸€è¢‹ï¼Œå¯ä»¥è£å¹¾è¢‹ï¼Ÿ", img: IMG.u2q5, answer: "5", hint: "30Ã·6 â†’ 6Ã—5=30ï¼Œå‰›å¥½åˆ†å®Œï¼Œæ‰€ä»¥æ˜¯5è¢‹ã€‚" },
          { text: "6. æœ‰ 34 å¼µè²¼ç´™ï¼Œè¦åˆ†çµ¦ 4 å€‹å°æœ‹å‹ï¼Œæ¯äººå¯ä»¥åˆ†åˆ°å¹¾å¼µï¼Ÿ", img: IMG.u2q6, answer: "8", hint: "34Ã·4 â†’ 4Ã—8=32ï¼Œä¸è¶…é34 â†’ æ¯äºº8å¼µï¼Œé‚„å‰©2å¼µã€‚" },
          { text: "7. è€å¸«è²·äº† 19 é¡†å·§å…‹åŠ›ï¼Œè¦è£æˆæ¯è¢‹ 3 é¡†ï¼Œå¯ä»¥è£å¹¾è¢‹ï¼Ÿ", img: IMG.u2q7, answer: "6", hint: "19Ã·3 â†’ 3Ã—6=18 â†’ å¯ä»¥è£6è¢‹ï¼Œé‚„æœƒå‰©1é¡†ã€‚" },
          { text: "8. 42 é¡†ç³–æœåˆ†çµ¦ 5 ä½åŒå­¸ï¼Œæ¯äººå¯ä»¥åˆ†åˆ°å¹¾é¡†ï¼Ÿ(å¯«æ•´æ•¸éƒ¨åˆ†)", img: IMG.u2q8, answer: "8", hint: "42Ã·5 â†’ 5Ã—8=40 â†’ æ¯äºº8é¡†ï¼Œé¤˜2ã€‚é€™é¡å…ˆæ‰¾ä¸è¶…éçš„ä¹˜æ³•ã€‚" }
        ]
      },

      /* å–®å…ƒ3 */
      u3: {
        name: "å–®å…ƒ3 åˆ†æ•¸çš„èªè­˜",
        focus: `
          <div class="panel-title">å–®å…ƒ3 åˆ†æ•¸çš„èªè­˜ <span class="badge">NC-3-9-1</span></div>
          <div class="panel-sub">å¾ã€Œè¢«å¹³å‡åˆ†æˆå¹¾ä»½ã€å­¸æœƒåˆ†æ¯ï¼Œå–å¹¾ä»½å°±æ˜¯åˆ†å­ï¼Œèƒ½çœ‹åœ–èªªåˆ†æ•¸ã€å¡—åˆ†æ•¸ã€‚</div>
          <ul>
            <li>èªªå‡ºã€Œå¹¾åˆ†ä¹‹å¹¾ã€ã€‚</li>
            <li>é€£çºŒé‡ã€é›¢æ•£é‡éƒ½èƒ½ç”¨åˆ†æ•¸è¡¨ç¤ºã€‚</li>
            <li>èƒ½çœ‹åœ–å¯«åˆ†æ•¸ã€‚</li>
          </ul>
          <button class="primary-btn" onclick="startUnit('u3')">é–‹å§‹ç·´ç¿’ (8é¡Œ)</button>
        `,
        questions: [
          { text: "1. ä¸€å€‹åœ“å¹³å‡åˆ†æˆ 4 ä»½ï¼Œå¡—äº†å…¶ä¸­ 1 ä»½ï¼Œæ‡‰å¯«æˆå¹¾åˆ†ä¹‹å¹¾ï¼Ÿ", img: IMG.u3q1, answer: "1/4", hint: "è¢«åˆ†æˆ4ä»½ â†’ åˆ†æ¯4ï¼›å¡—1ä»½ â†’ åˆ†å­1ï¼Œæ‰€ä»¥æ˜¯ 1/4ã€‚" },
          { text: "2. ä¸€æ¢è›‹ç³•å¹³å‡åˆ†æˆ 8 ä»½ï¼Œå°æ˜åƒäº† 3 ä»½ï¼Œåƒäº†å¹¾åˆ†ä¹‹å¹¾ï¼Ÿ", img: IMG.u3q2, answer: "3/8", hint: "å¹³å‡åˆ†æˆ8ä»½ â†’ åˆ†æ¯8ï¼›åƒ3ä»½ â†’ åˆ†å­3 â†’ 3/8ã€‚" },
          { text: "3. æœ‰ 6 é¡†è‰è“ï¼Œè¢«å¹³å‡åˆ†æˆ 6 ä»½ï¼Œæ‹¿èµ° 2 ä»½ï¼Œè¡¨ç¤ºæˆåˆ†æ•¸æ˜¯ï¼Ÿ", img: IMG.u3q3, answer: "2/6", hint: "ä¸€å…±6ä»½ â†’ åˆ†æ¯6ï¼›æ‹¿2ä»½ â†’ åˆ†å­2 â†’ 2/6ã€‚" },
          { text: "4. ä¸€å€‹é•·æ–¹å½¢è¢«å¹³å‡åˆ†æˆ 3 ä»½ï¼Œå¡—äº† 2 ä»½ï¼Œè«‹å¯«å‡ºåˆ†æ•¸ã€‚", img: IMG.u3q4, answer: "2/3", hint: "åˆ†æˆ3ä»½ â†’ åˆ†æ¯3ï¼›å¡—2ä»½ â†’ åˆ†å­2ã€‚" },
          { text: "5. æœ‰ 10 é¡†é¤…ä¹¾ï¼Œå¹³å‡åˆ†æˆ 5 ä»½ï¼Œæ¯ä»½æœ‰ 2 é¡†ï¼Œå–äº† 1 ä»½ï¼Œè«‹å¯«å‡ºæ‰€å–çš„åˆ†æ•¸ã€‚", img: IMG.u3q5, answer: "1/5", hint: "è¢«å¹³å‡åˆ†æˆ5ä»½ â†’ å¯«æˆå¹¾åˆ†ä¹‹å¹¾ â†’ 1/5ã€‚" },
          { text: "6. ä¸€å€‹æŠ«è–©åˆ‡æˆ 8 ç‰‡ï¼Œåƒäº† 5 ç‰‡ï¼Œåƒäº†å¹¾åˆ†ä¹‹å¹¾ï¼Ÿ", img: IMG.u3q6, answer: "5/8", hint: "åˆ‡æˆ8ç‰‡ â†’ åˆ†æ¯8ï¼›åƒ5ç‰‡ â†’ åˆ†å­5 â†’ 5/8ã€‚" },
          { text: "7. ä¸‹åœ–ä¸€æ¢å¸ƒè¢«å¹³å‡åˆ†æˆ 10 ä»½ï¼Œå‰ªä¸‹ 4 ä»½ï¼Œè«‹å¯«å‡ºåˆ†æ•¸ã€‚", img: IMG.u3q7, answer: "4/10", hint: "å¹³å‡åˆ†10ä»½ â†’ åˆ†æ¯10ï¼›å‰ª4ä»½ â†’ åˆ†å­4 â†’ 4/10ã€‚" },
          { text: "8. ä¸€å€‹æ­£æ–¹å½¢å¹³å‡åˆ†æˆ 2 ä»½ï¼Œå¡—äº† 1 ä»½ï¼Œè«‹å¯«å‡ºåˆ†æ•¸ã€‚", img: IMG.u3q8, answer: "1/2", hint: "åˆ†æˆ2ä»½ â†’ åˆ†æ¯2ï¼›å¡—1ä»½ â†’ åˆ†å­1 â†’ 1/2ã€‚" }
        ]
      },

      /* å–®å…ƒ4 */
      u4: {
        name: "å–®å…ƒ4 å…ˆç®—å¾Œé™¤",
        focus: `
          <div class="panel-title">å–®å…ƒ4 å…ˆåŠ (æ¸›)å¾Œé™¤ <span class="badge">NC-3-7-2</span></div>
          <div class="panel-sub">å…ˆæŠŠç¸½æ•¸ç®—å‡ºä¾†ï¼Œå†å¹³å‡åˆ†æˆ–çœ‹èƒ½åˆ†å¹¾çµ„ï¼Œ2 å€‹ç®—å¼éƒ½è¦æœ‰ã€‚</div>
          <ul>
            <li>å…ˆç®—åŠ æ¸›å¾—åˆ°ã€Œç¸½å…±å¹¾å€‹ã€ã€‚</li>
            <li>å†ç”¨é™¤æ³•åˆ†çµ¦å¹¾å€‹äººæˆ–å¹¾çµ„ã€‚</li>
            <li>ç”Ÿæ´»æƒ…å¢ƒï¼šéƒŠéŠåˆ†é»å¿ƒã€æ¯”è³½åˆ†éšŠã€‚</li>
          </ul>
          <button class="primary-btn" onclick="startUnit('u4')">é–‹å§‹ç·´ç¿’ (8é¡Œ)</button>
        `,
        questions: [
          { text: "1. ç­ä¸Šç”·ç”Ÿ 12 äººï¼Œå¥³ç”Ÿ 9 äººï¼Œè¦åˆ†æˆ 7 çµ„ï¼Œæ¯çµ„å¹¾äººï¼Ÿ", img: IMG.u4q1, answer: "3", hint: "å…ˆåŠ ï¼š12+9=21ï¼Œå†ï¼š21Ã·7=3ã€‚" },
          { text: "2. å°æ˜æœ‰ 18 é¡†ç³–ï¼Œåª½åª½åˆçµ¦ä»– 4 é¡†ï¼Œä»–è¦åˆ†çµ¦ 5 å€‹åŒå­¸ï¼Œæ¯äººåˆ†åˆ°å¹¾é¡†ï¼Ÿ", img: IMG.u4q2, answer: "4", hint: "å…ˆåŠ ï¼š18+4=22ï¼Œå†ï¼š22Ã·5=4â€¦2 â†’ å¯«4é¡†ã€‚" },
          { text: "3. éŠæ¨‚åœ’æœ‰ 35 å¼µç¥¨ï¼Œåˆé€ä¾† 7 å¼µï¼Œåˆ†çµ¦ 7 çµ„å­¸ç”Ÿï¼Œæ¯çµ„å¯åˆ†åˆ°å¹¾å¼µï¼Ÿ", img: IMG.u4q3, answer: "6", hint: "å…ˆåŠ ï¼š35+7=42ï¼Œå†ï¼š42Ã·7=6ã€‚" },
          { text: "4. ç¾å‹èª²åšäº† 28 æœµèŠ±ï¼Œè€å¸«åˆè£œåš 8 æœµï¼Œè¦å¹³å‡åˆ†çµ¦ 6 æ¡ŒåŒå­¸ï¼Œæ¯æ¡Œå¯ä»¥æ‹¿åˆ°å¹¾æœµï¼Ÿ", img: IMG.u4q4, answer: "6", hint: "å…ˆåŠ ï¼š28+8=36ï¼Œå†ï¼š36Ã·6=6ã€‚" },
          { text: "5. æ–‡å…·ç®±è£¡æœ‰ 40 æç­†ï¼Œå°è¯æ‹¿èµ° 4 æï¼Œå‰©ä¸‹çš„è¦åˆ†çµ¦ 6 å€‹äººï¼Œæ¯äººå¯ä»¥åˆ†åˆ°å¹¾æï¼Ÿ", img: IMG.u4q5, answer: "6", hint: "å…ˆæ¸›ï¼š40-4=36ï¼Œå†ï¼š36Ã·6=6ã€‚" },
          { text: "6. æ•™å®¤è£¡æœ‰ 25 æœ¬æ•…äº‹æ›¸ï¼Œåˆå€Ÿä¾† 5 æœ¬ï¼Œè¦åˆ†çµ¦ 5 çµ„åŒå­¸ï¼Œæ¯çµ„å¹¾æœ¬ï¼Ÿ", img: IMG.u4q6, answer: "6", hint: "å…ˆåŠ ï¼š25+5=30ï¼Œå†ï¼š30Ã·5=6ã€‚" },
          { text: "7. å­¸æ ¡è²·äº† 50 å€‹éºµåŒ…ï¼Œé«”è‚²ç­åƒäº† 8 å€‹ï¼Œå‰©ä¸‹çš„è¦åˆ†çµ¦ 7 ç­ï¼Œæ¯ç­å¯ä»¥åˆ†åˆ°å¹¾å€‹ï¼Ÿ(å¯«æ•´æ•¸)", img: IMG.u4q7, answer: "6", hint: "å…ˆæ¸›ï¼š50-8=42ï¼Œå†ï¼š42Ã·7=6ã€‚" },
          { text: "8. éŠæˆ²éœ€è¦ 32 é¡†çƒï¼Œè€å¸«åˆæ‹¿ä¾† 4 é¡†ï¼Œç¾åœ¨æœ‰ 6 éšŠåŒå­¸è¦æ¯”è³½ï¼Œæ¯éšŠå¯ä»¥åˆ†åˆ°å¹¾é¡†ï¼Ÿ", img: IMG.u4q8, answer: "6", hint: "å…ˆåŠ ï¼š32+4=36ï¼Œå†ï¼š36Ã·6=6ã€‚" }
        ]
      },

      /* å–®å…ƒ5 */
      u5: {
        name: "å–®å…ƒ5 é€£ä¹˜å•é¡Œ",
        focus: `
          <div class="panel-title">å–®å…ƒ5 é€£ä¹˜å…©æ­¥é©Ÿ <span class="badge">NC-3-7-3</span></div>
          <div class="panel-sub">ç¬¬1æ­¥å…ˆæ±‚1çµ„æœ‰å¤šå°‘ï¼Œç¬¬2æ­¥å†ä¹˜æœ‰å¹¾çµ„ï¼Œå…©æ­¥éƒ½è¦å¯«å‡ºä¾†ã€‚</div>
          <ul>
            <li>å¸¸è¦‹æƒ…å¢ƒï¼šæ¯ç›’å¹¾å€‹ã€å¹¾ç›’æ˜¯ä¸€ç®±ã€å¹¾ç®±å…±æœ‰å¹¾å€‹ã€‚</li>
            <li>å…ˆç®—å°å–®ä½ â†’ å†ç®—å¤§å–®ä½ã€‚</li>
          </ul>
          <button class="primary-btn" onclick="startUnit('u5')">é–‹å§‹ç·´ç¿’ (8é¡Œ)</button>
        `,
        questions: [
          { text: "1. ä¸€ç›’æœ‰ 6 æ”¯é‰›ç­†ï¼Œä¸€ç®±æœ‰ 4 ç›’ï¼Œä¸€å…±å¹¾æ”¯é‰›ç­†ï¼Ÿ", img: IMG.u5q1, answer: "24", hint: "1ç®±=6Ã—4=24 æ”¯ã€‚" },
          { text: "2. ä¸€æ‰“æœ‰ 12 é¡†é›è›‹ï¼Œé¤å»³è²·äº† 3 æ‰“ï¼Œä¸€å…±æœ‰å¹¾é¡†ï¼Ÿ", img: IMG.u5q2, answer: "36", hint: "12Ã—3=36 é¡†ã€‚" },
          { text: "3. ä¸€åŒ…æœ‰ 5 å€‹éºµåŒ…ï¼Œä¸€ç®±æœ‰ 3 åŒ…ï¼Œå­¸æ ¡è²·äº† 2 ç®±ï¼Œä¸€å…±æœ‰å¹¾å€‹éºµåŒ…ï¼Ÿ", img: IMG.u5q3, answer: "30", hint: "1ç®±=5Ã—3=15ï¼›2ç®±=15Ã—2=30ã€‚" },
          { text: "4. ä¸€ç›’æœ‰ 8 æè‰²ç­†ï¼Œè€å¸«è²·äº† 5 ç›’çµ¦ä¸‰å¹´ç´šï¼Œä¸€å…±æœ‰å¹¾æï¼Ÿ", img: IMG.u5q4, answer: "40", hint: "8Ã—5=40 æã€‚" },
          { text: "5. æ¯ç­æœ‰ 24 äººï¼Œä¸‰å¹´ç´šæœ‰ 3 ç­ï¼Œå­¸æ ¡è¦ç™¼æ¯äºº 2 æœ¬è¬›ç¾©ï¼Œä¸€å…±è¦å¹¾æœ¬ï¼Ÿ", img: IMG.u5q5, answer: "144", hint: "å…ˆäººæ•¸ï¼š24Ã—3=72ï¼›å†ï¼š72Ã—2=144 æœ¬ã€‚" },
          { text: "6. ç¾å‹èª²æ¯å€‹å­¸ç”Ÿè¦ 3 å¼µè‰²ç´™ï¼Œäº”å¹´ç´šæœ‰ 4 ç­ï¼Œæ¯ç­ 28 äººï¼Œä¸€å…±è¦æº–å‚™å¹¾å¼µè‰²ç´™ï¼Ÿ", img: IMG.u5q6, answer: "336", hint: "äººæ•¸ï¼š28Ã—4=112ï¼›å†ï¼š112Ã—3=336ã€‚" },
          { text: "7. ä¸€ç“¶é£²æ–™ 25 å…ƒï¼Œ1 çµ„è¦è²· 4 ç“¶ï¼Œä¸€å…±æœ‰ 3 çµ„è¦è²·ï¼Œä¸€å…±è¦å¤šå°‘å…ƒï¼Ÿ", img: IMG.u5q7, answer: "300", hint: "1çµ„ï¼š25Ã—4=100ï¼›3çµ„ï¼š100Ã—3=300ã€‚" },
          { text: "8. ä¸€å€‹ç¦®ç‰©åŒ…è¦è²¼ç´™ 3 å¼µï¼Œ1 ç­è¦ 5 å€‹ç¦®ç‰©åŒ…ï¼Œå…©å€‹ç­ä¸€å…±è¦å¹¾å¼µè²¼ç´™ï¼Ÿ", img: IMG.u5q8, answer: "30", hint: "1ç­ï¼š3Ã—5=15ï¼›2ç­ï¼š15Ã—2=30ã€‚" }
        ]
      },

      /* å–®å…ƒ6 */
      u6: {
        name: "å–®å…ƒ6 åŠ æ¸›ä¼°ç®—",
        focus: `
          <div class="panel-title">å–®å…ƒ6 å››ä½æ•¸åŠ æ¸›ä¼°ç®— <span class="badge">NC-3-8-1</span></div>
          <div class="panel-sub">å…ˆçœ‹å“ªå€‹æ•´ç™¾/æ•´åƒæ¯”è¼ƒè¿‘ï¼Œå†åŠ æ¸›ï¼Œæœ€å¾Œåˆ¤æ–·æ˜¯ä¸æ˜¯åˆç†ã€‚</div>
          <ul>
            <li>é è¿‘çš„å°±é€²ä½æˆ–æ¨å»ã€‚</li>
            <li>ç”¨å¿ƒç®—å…ˆæŠ“å¤§æ¦‚å€¼ã€‚</li>
            <li>ä¼°ç®—å¾Œè¦èªªå‡ºåˆç†æ€§ã€‚</li>
          </ul>
          <button class="primary-btn" onclick="startUnit('u6')">é–‹å§‹ç·´ç¿’ (8é¡Œ)</button>
        `,
        questions: [
          { text: "1. 1,984 ç´„æ˜¯å¤šå°‘ï¼Ÿ(å–æ¥è¿‘çš„åƒä½)", img: IMG.u6q1, answer: "2000", hint: "1,984 é è¿‘ 2,000ï¼Œæ¯” 1,000 è¿‘ï¼Œæ‰€ä»¥ä¼° 2,000ã€‚" },
          { text: "2. 3,210 ç´„æ˜¯å¤šå°‘ï¼Ÿ(å–æ¥è¿‘çš„åƒä½)", img: IMG.u6q2, answer: "3000", hint: "3,210 æ¯” 3,000 è¿‘ï¼Œæ‰€ä»¥ä¼° 3,000ã€‚" },
          { text: "3. 2,450 ç´„æ˜¯å¤šå°‘ï¼Ÿ(å–æ¥è¿‘çš„ç™¾ä½)", img: IMG.u6q3, answer: "2500", hint: "2,450 ä»‹åœ¨ 2,400 å’Œ 2,500 ä¸­é–“ï¼Œå¯ä¼° 2,500ã€‚" },
          { text: "4. ç”¨ä¼°ç®—ï¼š1,980 + 2,050 ç´„ç­‰æ–¼å¤šå°‘ï¼Ÿ(å–åƒä½å¾Œå†åŠ )", img: IMG.u6q4, answer: "4000", hint: "1,980â‰ˆ2,000ï¼Œ2,050â‰ˆ2,000 â†’ 2,000+2,000=4,000ã€‚" },
          { text: "5. ç”¨ä¼°ç®—ï¼š3,180 âˆ’ 1,090 ç´„ç­‰æ–¼å¤šå°‘ï¼Ÿ(å–åƒä½å¾Œå†æ¸›)", img: IMG.u6q5, answer: "2000", hint: "3,180â‰ˆ3,000ï¼Œ1,090â‰ˆ1,000 â†’ 3,000-1,000=2,000ã€‚" },
          { text: "6. 4,890 è¦åŠ ä¸Š 1,120ï¼Œä¼°ç®—å¾Œå¤§ç´„æ˜¯å¤šå°‘ï¼Ÿ", img: IMG.u6q6, answer: "6000", hint: "4,890â‰ˆ5,000ï¼›1,120â‰ˆ1,000 â†’ 5,000+1,000=6,000ã€‚" },
          { text: "7. 5,430 ç´„æ˜¯å¤šå°‘ï¼Ÿ(å–æ¥è¿‘çš„åƒä½)", img: IMG.u6q7, answer: "5000", hint: "5,430 æ¯” 5,000 è¿‘ï¼Œæ‰€ä»¥ä¼° 5,000ã€‚" },
          { text: "8. ç”¨ä¼°ç®—åˆ¤æ–·ï¼š2,950ï¼‹3,020 çš„çµæœå¤§ç´„æ˜¯å¹¾åƒï¼Ÿ(è«‹åªå¯«å¹¾åƒï¼Œå¦‚ã€Œ6åƒã€å¯«6000)", img: IMG.u6q8, answer: "6000", hint: "2,950â‰ˆ3,000ï¼›3,020â‰ˆ3,000 â†’ 3,000+3,000=6,000ã€‚" }
        ]
      },

      /* å–®å…ƒ7 */
      u7: {
        name: "å–®å…ƒ7 é•·åº¦æ›ç®—",
        focus: `
          <div class="panel-title">å–®å…ƒ7 é•·åº¦å–®ä½æ›ç®— <span class="badge">NC-3-12-1</span></div>
          <div class="panel-sub">èªè­˜æ¯«ç±³ï¼Œæœƒåœ¨ mmã€cmã€m ä¹‹é–“æ›ç®—ï¼ŒçŸ­çš„æ±è¥¿ç”¨æ¯«ç±³ã€‚</div>
          <ul>
            <li>1m = 100cm</li>
            <li>1cm = 10mm</li>
            <li>èƒ½ cm â†” mm â†” m äº’æ›</li>
          </ul>
          <button class="primary-btn" onclick="startUnit('u7')">é–‹å§‹ç·´ç¿’ (8é¡Œ)</button>
        `,
        questions: [
          { text: "1. 1 å…¬å°ºç­‰æ–¼å¹¾å…¬åˆ†ï¼Ÿ", img: IMG.u7q1, answer: "100", hint: "1m = 100cmï¼Œé€™æ˜¯åŸºæœ¬æ›ç®—ã€‚" },
          { text: "2. 1 å…¬åˆ†ç­‰æ–¼å¹¾æ¯«ç±³ï¼Ÿ", img: IMG.u7q2, answer: "10", hint: "1cm = 10mmã€‚" },
          { text: "3. 5 å…¬åˆ†ç­‰æ–¼å¹¾æ¯«ç±³ï¼Ÿ", img: IMG.u7q3, answer: "50", hint: "1cm=10mm â†’ 5cm=50mmã€‚" },
          { text: "4. 120 å…¬åˆ†ç­‰æ–¼å¹¾å…¬å°ºï¼Ÿ(å¯«é˜¿æ‹‰ä¼¯æ•¸å­—)", img: IMG.u7q4, answer: "1.2", hint: "100cm=1mï¼Œé‚„æœ‰20cm=0.2m â†’ 1.2mã€‚" },
          { text: "5. 3 å…¬å°ºç­‰æ–¼å¹¾å…¬åˆ†ï¼Ÿ", img: IMG.u7q5, answer: "300", hint: "1m=100cm â†’ 3m=300cmã€‚" },
          { text: "6. ä¸€æ”¯é‰›ç­†é•· 14 å…¬åˆ†ï¼Œç­‰æ–¼å¹¾æ¯«ç±³ï¼Ÿ", img: IMG.u7q6, answer: "140", hint: "14cm â†’ 14Ã—10=140mmã€‚" },
          { text: "7. ä¸€æ¢ç¹©å­é•· 250 å…¬åˆ†ï¼Œç­‰æ–¼å¹¾å…¬å°ºï¼Ÿ", img: IMG.u7q7, answer: "2.5", hint: "250cm â†’ 200cm=2mï¼Œå†åŠ 50cm=0.5m â†’ 2.5mã€‚" },
          { text: "8. å°ç´™æ¢é•· 8 æ¯«ç±³ï¼Œç­‰æ–¼å¹¾å…¬åˆ†ï¼Ÿ(å¯«å°æ•¸)", img: IMG.u7q8, answer: "0.8", hint: "10mm=1cm â†’ 8mm=0.8cmã€‚" }
        ]
      }
    };

    let currentUnit = 'u1';
    let currentQIndex = 0;

    document.getElementById("learning-panel").innerHTML = UNITS['u1'].focus;

    document.querySelectorAll('.unit-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.unit-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        const unitId = btn.getAttribute('data-unit');
        showLearning(unitId);
      });
    });

    function showLearning(unitId) {
      currentUnit = unitId;
      currentQIndex = 0;
      document.getElementById("learning-panel").innerHTML = UNITS[unitId].focus;
      document.getElementById("learning-panel").style.display = "block";
      document.getElementById("question-panel").style.display = "none";
    }

    function startUnit(unitId) {
      currentUnit = unitId;
      currentQIndex = 0;
      renderQuestion();
      document.getElementById("learning-panel").style.display = "none";
      document.getElementById("question-panel").style.display = "block";
    }

    function renderQuestion() {
      const unit = UNITS[currentUnit];
      const q = unit.questions[currentQIndex];
      const progressPercent = ((currentQIndex) / unit.questions.length) * 100;

      document.getElementById("question-panel").innerHTML = `
        <div class="question-card">
          <div class="panel-title">${unit.name}</div>
          <div class="progress"><div class="progress-fill" style="width:${progressPercent}%;"></div></div>
          <div class="panel-sub">ç¬¬ ${currentQIndex + 1} é¡Œ / å…± ${unit.questions.length} é¡Œ</div>
          <div class="question-top">
            <div class="question-text">${q.text}</div>
            <div class="question-img"><img src="${q.img}" alt="ç¤ºæ„åœ–"></div>
          </div>
          <div class="answer-area">
            <input type="text" id="answer-input" placeholder="è«‹è¼¸å…¥ç­”æ¡ˆ" onkeydown="if(event.key==='Enter'){checkAnswer();}">
            <button class="primary-btn" onclick="checkAnswer()">ç¢ºèª</button>
          </div>
          <div id="correct-banner" class="correct-banner">âœ… ç­”å°äº†ï¼</div>
          <div id="hint-box" class="hint-box">${q.hint}</div>
        </div>
      `;
    }

    function checkAnswer() {
      const unit = UNITS[currentUnit];
      const q = unit.questions[currentQIndex];
      const userAns = (document.getElementById("answer-input").value || "").trim();
      const card = document.querySelector(".question-card");
      const hint = document.getElementById("hint-box");
      const banner = document.getElementById("correct-banner");

      if (userAns === "") return;

      if (userAns === q.answer) {
        hint.style.display = "none";
        banner.style.display = "inline-flex";
        setTimeout(() => {
          currentQIndex++;
          if (currentQIndex >= unit.questions.length) {
            showDone(unit.name);
          } else {
            renderQuestion();
          }
        }, 450);
      } else {
        hint.style.display = "block";
        banner.style.display = "none";
        card.classList.remove("shake");
        void card.offsetWidth;
        card.classList.add("shake");
      }
    }

    function showDone(unitName) {
      document.getElementById("question-panel").innerHTML = `
        <div class="done-box">
          <h3>ğŸ‰ æ­å–œå®Œæˆã€Œ${unitName}ã€ï¼</h3>
          <p>ä½ å·²ç¶“ç­”å®Œ 8 é¡Œå›‰ï¼Œæƒ³è¦å†çœ‹ä¸€æ¬¡å­¸ç¿’é‡é»å—ï¼Ÿ</p>
          <button class="primary-btn" onclick="showLearning('${currentUnit}')">å›åˆ°æœ¬å–®å…ƒå­¸ç¿’é‡é»</button>
          <p class="small-muted">ä¹Ÿå¯ä»¥åˆ°å·¦é‚Šæ›ä¸‹ä¸€å€‹å–®å…ƒç¹¼çºŒæŒ‘æˆ°ã€‚</p>
        </div>
      `;
    }
  </script>
</body>
</html>
